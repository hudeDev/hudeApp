<!DOCTYPE html>
<!--[if IE 8]> 				 <html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width">
        <link rel="stylesheet" href="css/foundation.css">
        <link rel="stylesheet" href="css/jquery.fancybox.css">
        <link rel="stylesheet" href="css/jquery.fancybox-buttons.css">
        <script src="js/vendor/custom.modernizr.js"></script>
        <!-- Phonegap Abhängigkeiten -->
        <script src="phonegap.js"></script>
        <script src="barcodescanner.js"></script>
        <!-- andere Abhängigkeiten -->
        <script src="http://maps.google.com/maps/api/js?sensor=true" type="text/javascript"></script>
        <script src="js/jquery-1.9.1.min.js"></script>
        <script src="js/jquery.ui.map.full.min.js" type="text/javascript"></script>
        <script src="js/jquery.ba-hashchange.min.js" type="text/javascript"></script>
        <script src="js/jquery.exif.js" type="text/javascript"></script>
        <script src="js/jquery.fancybox.js" type="text/javascript"></script>
        <script src="js/jquery.fancybox-buttons.js" type="text/javascript"></script>
        <script src="js/fastclick.js"></script>
        <script src="js/print_r.js"></script>
        <!-- <script src="js/hude.js"></script> -->
        <script src="js/hude_foundation.js"></script>

        <script src="js/binaryajax.js"></script>
        <script src="js/exif.js"></script>

        
        <script>
            $(document).ready(function() {

                function tphConvertDMStoDec(dmsArray) {
                    var DEG = dmsArray[0]['numerator'];
                    var MIN = dmsArray[1]['numerator'];
                    var SEC = dmsArray[2]['numerator'];
                    var DEC = '';
                    if (DEG < 0) {
                        DEC = (Math.ceil(((DEG * 1) - (MIN / 60) - (SEC / 3600)) * 10000)) / 10000;
                    }
                    else {
                        DEC = (Math.floor(((DEG * 1) + (MIN / 60) + (SEC / 3600)) * 10000)) / 10000;
                    }
                    return DEC;
                }

                console.log('Bereit');
                $('.fotojagd').fancybox({
                    openEffect: 'none',
                    closeEffect: 'none',
                    beforeShow: function() {
                        // ID des Bildes holen
                        var imgID = this.element.find('img').attr('id');
                        console.log(imgID);
                        this.title = 'Bitte öffne das Bild erneut!';
                        image = document.getElementById(imgID);
                        bildAnchor = EXIF.getData(image, function() {
                            // GPS-Daten aus dem Bild auslesen
                            latFotojagd = EXIF.getTag(this, "GPSLatitude");
                            lonFotojagd = EXIF.getTag(this, "GPSLongitude");
                            // GPS-Daten von Grad, Minute, Sekunde ins Dezimale umrechnen
                            latFotojagd = tphConvertDMStoDec(latFotojagd);
                            lonFotojagd = tphConvertDMStoDec(lonFotojagd);
                            console.log('###' + latFotojagd + ',' + lonFotojagd + ' ' + bildAnchor);
                            deineMama(latFotojagd, lonFotojagd);
                            // Ausgabe: ###53.1458,8.2044 <a href="#">8.2044</a>
                            return 'lala';
                        });
                        // 'Gefunden'-Button einfügen
                        console.log(bildAnchor);
                    }

                });
                function deineMama(lat, lon) {
                    $('.fotojagd').fancybox({
                        beforeShow: function() {
                            this.title = '<a onclick="alert(\'natürlich\');">Gefunden</a>';
                        }
                    });
                }
            });
        </script>
    </head>
    <body>
        <div class="row">
            <div class="large-6 small-6 columns">
                <a href="images/schnitzeljagd/fotojagd/hude/schnitzeljagd_fotojagd_hude_10.jpg" rel="lightbox" title="Beautiful, isn't it?">Click here</a> to view a picture inside Slimbox.
            </div>
            <div class="large-6 small-6 columns">
                <a class="th radius fotojagd" href="images/schnitzeljagd/fotojagd/IMG_20130723_115141.jpg">
                    <img id="zwei" src="images/schnitzeljagd/fotojagd/IMG_20130723_115141.jpg"  title="zwei"/>
                </a>
            </div>
            <div class="large-6 small-6 columns">
                <a class="th radius fotojagd"  href="images/schnitzeljagd/fotojagd/IMG_20130606_142019.jpg">
                    <img id="eins" src="images/schnitzeljagd/fotojagd/IMG_20130606_142019.jpg"  title="eins" />
                </a>
            </div>
            <div class="large-6 small-6 columns">
                <a class="radius button" data-reveal-id="firstModal" href="#">Example Modal…</a>
            </div>
        </div>
        <script>
            document.write('<script src=' +
                    ('__proto__' in {} ? 'js/vendor/zepto' : 'js/vendor/jquery') +
                    '.js><\/script>')
        </script>

        <script src="js/foundation.min.js"></script>
        <script src="js/foundation/foundation.js"></script>
        <script src="js/foundation/foundation.alerts.js"></script>
        <script src="js/foundation/foundation.clearing.js"></script>
        <script src="js/foundation/foundation.cookie.js"></script>
        <script src="js/foundation/foundation.dropdown.js"></script>
        <script src="js/foundation/foundation.forms.js"></script>
        <script src="js/foundation/foundation.joyride.js"></script>
        <script src="js/foundation/foundation.magellan.js"></script>
        <script src="js/foundation/foundation.orbit.js"></script>
        <script src="js/foundation/foundation.reveal.js"></script>
        <script src="js/foundation/foundation.section.js"></script>
        <script src="js/foundation/foundation.tooltips.js"></script>
        <script src="js/foundation/foundation.topbar.js"></script>
        <script src="js/foundation/foundation.interchange.js"></script>
        <script src="js/foundation/foundation.placeholder.js"></script>
        <script src="js/foundation/foundation.abide.js"></script>
        <div id="myModal" class="reveal-modal">
            <h2>Awesome. I have it.</h2>
            <p class="lead">Your couch.  It is mine.</p>
            <p>Im a cool paragraph that lives inside of an even cooler modal. Wins</p>
            <a class="close-reveal-modal">&#215;</a>
        </div>
    </body>
</html>
